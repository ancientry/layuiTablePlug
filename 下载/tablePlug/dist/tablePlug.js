/** layui-v2.4.5 MIT License By https://www.layui.com */
 ;layui.define(["table"],function(e){"use strict";var a=layui.$,t=(layui.laytpl,layui.laypage,layui.layer,layui.form),i=(layui.util,layui.table),n=layui.hint(),l=(layui.device(),{}),r="additional",o="removed",c="original",s="layui-none",u="layui-hide",d="layui-tablePlug-loading-p",f=".layui-table-header",h="colGroup",p=["numbers","checkbox","radio"],y=function(){return!(!i.thisTable||!i.Class)}(),g=function(e){return y?i.thisTable.that[e]:(n.error("getIns方法需要在对layui的table进行一定必要的改造才能使用！请到 https://fly.layui.com/jie/43423/ 里面的查看相关内容将table.js进行一个非常小的改造，之后再试试看。"),{})},v=function(){var e={};return{check:function(a){return!!e[a]},reset:function(a){e[a]?(this.set(a,r,[]),this.set(a,o,[])):e[a]={original:[],additional:[],removed:[]}},init:function(e,a){this.reset(e),this.set(e,c,a)},getChecked:function(e){var a=this.get(e,o),t=this.get(e,c).concat(this.get(e,r)),i=[];return layui.each(t,function(e,t){a.indexOf(t)===-1&&i.indexOf(t)===-1&&i.push(t)}),i},get:function(a,t){return t===r||t===o||t===c?e[a]?e[a][t]:[]:e[a]},set:function(a,t,i){t!==c&&t!==r&&t!==o||(e[a][t]=i&&m(i)?i:[])},update:function(a,t,i){var n=e[a][c],l=e[a][r],s=e[a][o];i?n.indexOf(t)===-1?l.indexOf(t)===-1&&l.push(t):s.indexOf(t)!==-1&&s.splice(s.indexOf(t),1):n.indexOf(t)===-1?l.indexOf(t)!==-1&&l.splice(l.indexOf(t),1):s.indexOf(t)===-1&&s.push(t)}}}(),m=function(e){return"[object Array]"===Object.prototype.toString.call(e)},x=function(e,a,t){if(e&&a)for(var n=v.get(a,r)||[],l=v.get(a,c)||[],s=v.get(a,o)||[],u=n.concat(l.filter(function(e,a){return s.indexOf(e)===-1})),d=0;d<e.length;d++)u.indexOf(e[d].id)!==-1&&(e[d][t||i.config.checkName]=!0)},C=i.Class.prototype.sort;i.Class.prototype.sort=function(){var e=this,a=[];layui.each(arguments,function(e,t){a.push(t)}),alert("KKK"),C.apply(e,a)};var b=i.Class.prototype.loading;i.Class.prototype.loading=function(e){var t=this;if(b.call(t,e),!e&&t.layInit){t.layInit.remove(),t.layInit.addClass("layui-anim layui-anim-rotate layui-anim-loop"),t.layMain.height()||t.layBox.append(a('<div class="'+d+'" style="height: 56px;"></div>'));var i=0;t.layMain.height()-t.layMain.prop("clientHeight")>0&&(i=t.getScrollWidth()),t.layInit.height(t.layBox.height()-t.layHeader.height()-i).css("marginTop",t.layHeader.height()+"px"),t.layBox.append(t.layInit)}};var O=i.Class.prototype.setColsWidth;i.Class.prototype.setColsWidth=function(){var e=this;e.layBox.find("."+d).remove(),O.call(e);var t=e.config;if(t.cols.length>1){var i=e.layFixed.find(f).find("th"),n=e.layHeader.height();n/=t.cols.length,i.each(function(e,t){t=a(t),t.height(n*parseInt(t.attr("rowspan")||1)-1-parseFloat(t.css("padding-top"))-parseFloat(t.css("padding-bottom")))})}if(e.elem.data("patch")===!0){e.elem.data("patch",null);var l=e.elem.find("."+s);if(l.length){e.layFixed.find("tbody").html(""),e.layFixed.addClass(u);var r=['<table cellspacing="0" cellpadding="0" border="0" class="layui-table"><tbody></tbody></table>'],o=l.prev();o&&o.length||a(r.join("")).insertBefore(l),e.layTotal.addClass(u),e.layPage.addClass(u),e.layBox.find('input[lay-filter="layTableAllChoose"]').prop("checked",!1)}else{var c=e.layFixed.prevObject;c.find(e.layFixed.selector).length||e.layBox.append(e.layFixed),e.layFixLeft.removeClass(u),e.layTotal.removeClass(u)}e.renderForm("checkbox")}},i.Class.prototype.setInit=function(e){var a=this,t=a.config;return t.clientWidth=t.width||function(){var e=function(a){var i,n;a=a||t.elem.parent(),i=a.width();try{n="none"===a.css("display")}catch(l){}return!a[0]||i&&!n?i:e(a.parent())};return e()}(),"width"===e?t.clientWidth:void layui.each(t.cols,function(e,i){layui.each(i,function(n,l){if(!l)return void i.splice(n,1);if(l.key=e+"-"+n,l.hide=l.hide||!1,l.colGroup||l.colspan>1){var r=0;layui.each(t.cols[e+(parseInt(l.rowspan)||1)],function(a,t){t.HAS_PARENT||r>1&&r==l.colspan||(t.HAS_PARENT=!0,t.parentKey=e+"-"+n,r+=parseInt(t.colspan>1?t.colspan:1))}),l.colGroup=!0}a.initOpts(l)})})};var k=i.Class.prototype.reload;i.Class.prototype.reload=function(e){var a=this;i.reload(a.config.id,e,!0)},i.eachCols=function(e,t,i){var n=this,l=n.thisTable.config[e]||{},r=[],o=0;i=a.extend(!0,[],i||l.cols),layui.each(i,function(e,a){layui.each(a,function(a,t){if(t.colGroup){var n=0;o++,t.CHILD_COLS=[],layui.each(i[e+(parseInt(t.rowspan)||1)],function(e,a){a.PARENT_COL_INDEX||n>1&&n==t.colspan||(a.PARENT_COL_INDEX=o,t.CHILD_COLS.push(a),n+=parseInt(a.colspan>1?a.colspan:1))})}t.PARENT_COL_INDEX||r.push(t)})});var c=function(e){layui.each(e||r,function(e,a){return a.CHILD_COLS?c(a.CHILD_COLS):void("function"==typeof t&&t(e,a))})};c()};var I=i.render;i.render=function(e){var t=this,n=a.extend(!0,{},i.config,e),r=n.id||a(n.elem).attr("id");n.checkStatus&&!v.check(r)&&v.init(r,n.checkStatus["default"]);var o=n.parseData;if(o&&o.plugFlag||(e.parseData=function(e){e="function"==typeof o?o.call(t,e)||e:e;var a=n.response?n.response.dataName||"data":"data";return x(e[a],r),e},e.parseData.plugFlag=!0),n.colFilterRecord){var c=D.get(r,e.colFilterRecord);a.each(e.cols,function(e,t){a.each(t,function(e,a){a.hide=!!c[a.field]})})}else D.clear(r);e.cols.length>1&&layui.each(e.cols,function(e,a){layui.each(a,function(e,a){a.field||a.toolbar||a.colspan&&1!==a.colspan||p.indexOf(a.type)!==-1?!a[h]||a.colspan>1||(a[h]=!1):a[h]=!0})});var s=I.call(t,e),u=s.config.elem.next();u.attr("lay-id")!==s.config.id&&u.attr("lay-id",s.config.id);var d=g(s.config.id);return d&&d.index&&(d.setColsWidth(),d.config.url&&d.loading()),l[s.config.id]=s};var _=i.reload,T=function(){var e=["url","method","where","contentType","headers","parseData","request","response","data","page","initSort","autoSort"];return{getParams:function(){return e},registParams:function(){var a=this;layui.each(arguments,function(t,i){m(i)?a.registParams.apply(a,i):"string"==typeof i&&e.indexOf(i)===-1&&e.push(i)})},check:function(){}}}(),S=function(){var e=!1;return{enable:function(){if(!arguments.length)return e;var a=arguments[0];"boolean"!=typeof a?n.error("如果要开启或者关闭全局的表格智能重载模式，请传入一个true/false为参数"):e=a}}}();T.registParams("colFilterRecord","checkStatus","smartReloadModel"),i.reload=function(e,t,r){var o=this,c=L(e),s=a.extend(!0,{},L(e),t);if(S.enable()&&s.smartReloadModel){var u=!1;if(!!s.page!=!!c.page&&(u=!0),!u){var d=a.extend(!0,[],T.getParams());layui.each(t,function(e,a){var t=d.indexOf(e);return t===-1?u=!0:void d.splice(t,1)})}if(!u){if(y){var f=g(e);return"object"==typeof t.page&&(t.page.curr&&(f.page=t.page.curr),delete t.elem,delete t.jump),f.config=r?a.extend({},f.config,t):a.extend(!0,{},f.config,t),f.config.page||(f.page=1),f.elem.data("patch",!0),f.loading(),f.pullData(f.page),i.thisTable.call(f)}n.error("您开启了智能重载模式，但是未检测到一个必要的前提，另参考帖子 https://fly.layui.com/jie/43423/ 里面的相关内容将table.js进行一个非常小的改造，之后再试试看。")}}if(!r){var f=_.call(o,e,t);return l[e]=f}k.call(g(e),t),l[e].config=g(e).config};var L=function(e){return l[e]&&l[e].config},P=i.checkStatus;i.checkStatus=function(e){var a=this,t=L(e),i=P.call(a,e);return t&&t.checkStatus&&(i.status=v.get(e)),i},i.on("checkbox",function(e){var t=a(this).closest(".layui-table-view"),i=t.attr("lay-id"),n=L(i);if(n.page&&n.checkStatus&&v.check(i)){var l=e.checked,r=e.data,o=e.type,c=n.checkStatus.primaryKey||"id";"one"===o?v.update(i,r[c],l):"all"===o&&layui.each(layui.table.cache[i],function(e,a){v.update(i,a[c],l)})}}),t.on("checkbox",function(e){a(e.elem).change()});var D=function(){var e="tablePlug_col_filter_record",t=function(e){return"local"===e?"data":"sessionData"};return{set:function(a,i,n,l){if(a&&i){var r=t(l),o=this.get(a,l);o[i]=!n,layui[r](e,{key:a,value:o})}},get:function(a,i){return layui[t(i)](e)[a]||{}},clear:function(t){a.each(["data","sessionData"],function(a,i){layui[i](e,{key:t,remove:!0})})}}}();a(document).on("change",'input[lay-filter="LAY_TABLE_TOOL_COLS"]',function(e){var t=a(this),i=t.attr("name"),n=t.closest(".layui-table-view"),l=n.attr("lay-id"),r=L(l),o=r.colFilterRecord;o?D.set(l,i,this.checked,o):D.clear(l)});var E={CHECK_TYPE_ADDITIONAL:r,CHECK_TYPE_REMOVED:o,CHECK_TYPE_ORIGINAL:c,tableCheck:v,colFilterRecord:D,getConfig:L,getIns:function(e){return l[e]},queryParams:T,smartReload:S};e("tablePlug",E)});