/** layui-v2.4.5 MIT License By https://www.layui.com */
 ;layui.define(["table"],function(e){"use strict";var t=layui.$,a=(layui.laytpl,layui.laypage,layui.layer,layui.form),i=(layui.util,layui.table),n=layui.hint(),r=(layui.device(),{}),l="additional",c="removed",o="original",u="layui-none",s="layui-hide",d=function(){return!!i.thisTable}(),f=function(e){return d?i.thisTable.that[e]:(n.error("getIns方法需要在对layui的table进行一定必要的改造才能使用！请到 https://fly.layui.com/jie/43423/ 里面的查看相关内容将table.js进行一个非常小的改造，之后再试试看。"),{})},h=function(){var e={};return{check:function(t){return!!e[t]},reset:function(t){e[t]?(this.set(t,l,[]),this.set(t,c,[])):e[t]={original:[],additional:[],removed:[]}},init:function(e,t){this.reset(e),this.set(e,o,t)},getChecked:function(e){var t=this.get(e,c),a=this.get(e,o).concat(this.get(e,l)),i=[];return layui.each(a,function(e,a){t.indexOf(a)===-1&&i.indexOf(a)===-1&&i.push(a)}),i},get:function(t,a){return a===l||a===c||a===o?e[t]?e[t][a]:[]:e[t]},set:function(t,a,i){a!==o&&a!==l&&a!==c||(e[t][a]=i&&g(i)?i:[])},update:function(t,a,i){var n=e[t][o],r=e[t][l],u=e[t][c];i?n.indexOf(a)===-1?r.indexOf(a)===-1&&r.push(a):u.indexOf(a)!==-1&&u.splice(u.indexOf(a),1):n.indexOf(a)===-1?r.indexOf(a)!==-1&&r.splice(r.indexOf(a),1):u.indexOf(a)===-1&&u.push(a)}}}(),g=function(e){return"[object Array]"===Object.prototype.toString.call(e)},y=function(e,t,a){if(e&&t)for(var n=h.get(t,l)||[],r=h.get(t,o)||[],u=h.get(t,c)||[],s=n.concat(r.filter(function(e,t){return u.indexOf(e)===-1})),d=0;d<e.length;d++)s.indexOf(e[d].id)!==-1&&(e[d][a||i.config.checkName]=!0)},p=i.render;i.render=function(e){var a=this,n=t.extend(!0,{},i.config,e),l=n.id||t(n.elem).attr("id");n.checkStatus&&!h.check(l)&&h.init(l,n.checkStatus["default"]);var c=n.parseData;if(c&&c.plugFlag||(e.parseData=function(e){e="function"==typeof c?c.call(a,e)||e:e;var t=n.response?n.response.dataName||"data":"data";return y(e[t],l),e},e.parseData.plugFlag=!0),n.colFilterRecord){var o=O.get(l,e.colFilterRecord);t.each(e.cols,function(e,a){t.each(a,function(e,t){t.hide=!!o[t.field]})})}else O.clear(l);var d=p.call(a,e),g=d.config.elem.next();g.attr("lay-id")!==d.config.id&&g.attr("lay-id",d.config.id);var v=f(d.config.id),m=v.setColsWidth;return v.setColsWidth=function(){var e=this;if(m.call(e),e.elem.data("patch")===!0){e.elem.data("patch",null);var a=g.find("."+u);if(a.length){e.layFixed.find("tbody").html(""),e.layFixed.addClass(s);var i=['<table cellspacing="0" cellpadding="0" border="0" class="layui-table"><tbody></tbody></table>'],n=a.prev();n&&n.length||t(i.join("")).insertBefore(a),e.layTotal.addClass(s),e.layPage.addClass(s),e.layBox.find('input[lay-filter="layTableAllChoose"]').prop("checked",!1)}else{var r=e.layFixed.prevObject;r.find(e.layFixed.selector).length||e.layBox.append(e.layFixed),e.layFixLeft.removeClass(s),e.layTotal.removeClass(s)}e.renderForm("checkbox")}},r[d.config.id]=d};var v=i.reload,m=function(){var e=["url","method","where","contentType","headers","parseData","request","response","data","page"];return{getParams:function(){return e},registParams:function(){var t=this;layui.each(arguments,function(a,i){g(i)?t.registParams.apply(t,i):"string"==typeof i&&e.indexOf(i)===-1&&e.push(i)})},check:function(){}}}(),b=function(){var e=!1;return{enable:function(){if(!arguments.length)return e;var t=arguments[0];"boolean"!=typeof t?n.error("如果要开启或者关闭全局的表格智能重载模式，请传入一个true/false为参数"):e=t}}}();m.registParams("colFilterRecord","checkStatus","smartReloadModel"),i.reload=function(e,a){var l=this,c=t.extend(!0,{},x(e),a);if(b.enable()&&c.smartReloadModel){var o=!1;if(a.page&&!!c.page!=!!a.page&&(o=!0),!o){var u=t.extend(!0,[],m.getParams());layui.each(a,function(e,t){var a=u.indexOf(e);return a===-1?o=!0:void u.splice(a,1)})}if(!o){if(d){var s=f(e);return"object"==typeof a.page&&(a.page.curr&&(s.page=a.page.curr),delete a.elem,delete a.jump),t.extend(!0,s.config,a),s.config.page||(s.page=1),s.elem.data("patch",!0),s.loading(),s.pullData(s.page),i.thisTable.call(s)}n.error("您开启了智能重载模式，但是未检测到一个必要的前提，另参考帖子 https://fly.layui.com/jie/43423/ 里面的相关内容将table.js进行一个非常小的改造，之后再试试看。")}}var s=v.call(l,e,a);return r[s.config.id]=s};var x=function(e){return r[e]&&r[e].config},k=i.checkStatus;i.checkStatus=function(e){var t=this,a=x(e),i=k.call(t,e);return a&&a.checkStatus&&(i.status=h.get(e)),i},i.on("checkbox",function(e){var a=t(this).closest(".layui-table-view"),i=a.attr("lay-id"),n=x(i);if(n.page&&n.checkStatus&&h.check(i)){var r=e.checked,l=e.data,c=e.type,o=n.checkStatus.primaryKey||"id";"one"===c?h.update(i,l[o],r):"all"===c&&layui.each(layui.table.cache[i],function(e,t){h.update(i,t[o],r)})}}),a.on("checkbox",function(e){t(e.elem).change()});var O=function(){var e="tablePlug_col_filter_record",a=function(e){return"local"===e?"data":"sessionData"};return{set:function(t,i,n,r){if(t&&i){var l=a(r),c=this.get(t,r);c[i]=!n,layui[l](e,{key:t,value:c})}},get:function(t,i){return layui[a(i)](e)[t]||{}},clear:function(a){t.each(["data","sessionData"],function(t,i){layui[i](e,{key:a,remove:!0})})}}}();t(document).on("change",'input[lay-filter="LAY_TABLE_TOOL_COLS"]',function(e){var a=t(this),i=a.attr("name"),n=a.closest(".layui-table-view"),r=n.attr("lay-id"),l=x(r),c=l.colFilterRecord;c?O.set(r,i,this.checked,c):O.clear(r)});var C={CHECK_TYPE_ADDITIONAL:l,CHECK_TYPE_REMOVED:c,CHECK_TYPE_ORIGINAL:o,tableCheck:h,getConfig:x,colFilterRecord:O,getIns:f,queryParams:m,smartReload:b};e("tablePlug",C)});