/** layui-v2.4.5 MIT License By https://www.layui.com */
 ;layui.define(["table"],function(e){"use strict";var a=layui.$,t=layui.laytpl,i=layui.laypage,n=layui.layer,l=layui.form,r=(layui.util,layui.table),c=layui.hint(),o=(layui.device(),{}),s="additional",d="removed",u="original",h="disabled",f="layui-none",p="layui-hide",y="layui-tablePlug-loading-p",g=".layui-table-header",v="colGroup",b=["numbers","checkbox","radio"],m=function(){return!(!r.thisTable||!r.Class)}(),k=function(e){if(m)return r.thisTable.that[e]},x=function(){var e={};return{check:function(a){return!!e[a]},reset:function(a){e[a]?(this.set(a,s,[]),this.set(a,d,[])):(e[a]={},e[a][u]=[],e[a][s]=[],e[a][d]=[],e[a][h]=[])},init:function(e,a){this.reset(e),this.set(e,u,a)},disabled:function(a,t){e[a]||this.reset(a),this.set(a,h,t)},checkDisabled:function(e,a){return this.get(e,h).indexOf(a)!==-1},getChecked:function(e){var a=this.get(e,d),t=this.get(e,u).concat(this.get(e,s)),i=[];return layui.each(t,function(e,t){a.indexOf(t)===-1&&i.indexOf(t)===-1&&i.push(t)}),i},get:function(a,t){return t===s||t===d||t===u||t===h?e[a]?e[a][t]||[]:[]:e[a]},set:function(a,t,i){t!==u&&t!==s&&t!==d&&t!==h||(e[a][t]=i&&C(i)?i:[])},update:function(a,t,i){var n=e[a][u],l=e[a][s],r=e[a][d];i?n.indexOf(t)===-1?l.indexOf(t)===-1&&l.push(t):r.indexOf(t)!==-1&&r.splice(r.indexOf(t),1):n.indexOf(t)===-1?l.indexOf(t)!==-1&&l.splice(l.indexOf(t),1):r.indexOf(t)===-1&&r.push(t)}}}(),C=function(e){return"[object Array]"===Object.prototype.toString.call(e)},D=function(e,a){if(e&&a){var t=F(a);if(t.checkStatus)for(var i=x.getChecked(a),n=0;n<e.length;n++)e[n][r.config.checkName]=i.indexOf(e[n].id)!==-1}},T=function(e,a){var t=F(e);if(t){var i=t.elem.next();a&&(t.checkDisabled=t.checkDisabled||{},t.checkDisabled.enabled=t.checkDisabled.enabled||!0,t.checkDisabled.primaryKey=t.checkDisabled.primaryKey||"id",t.checkDisabled.data=x.get(e,h)||[]),t.checkDisabled&&t.checkDisabled.enabled?layui.each(r.cache[e],function(a,n){i.find(".layui-table-body").find('tr[data-index="'+a+'"]').find('input[name="layTableCheckbox"]').prop("disabled",x.checkDisabled(e,n[t.checkDisabled.primaryKey]))}):x.set(e,h,[]),i.find('input[lay-filter="layTableAllChoose"]').prop("checked",r.checkStatus(e).isAll),l.render("checkbox",i.attr("lay-filter"))}};if(m){var _=r.Class.prototype.loading;r.Class.prototype.loading=function(e){var t=this;if(_.call(t,e),!e&&t.layInit){t.layInit.remove(),t.layInit.addClass("layui-anim layui-anim-rotate layui-anim-loop"),t.layMain.height()||t.layBox.append(a('<div class="'+y+'" style="height: 56px;"></div>'));var i=0;t.layMain.height()-t.layMain.prop("clientHeight")>0&&(i=t.getScrollWidth()),t.layInit.height(t.layBox.height()-t.layHeader.height()-i).css("marginTop",t.layHeader.height()+"px"),t.layBox.append(t.layInit)}},r.Class.prototype.renderData=function(e,l,c,o){var s=this,d=s.config,u=e[d.response.dataName]||[],h=[],y=[],g=[],v=function(){var e;return!o&&s.sortKey?s.sort(s.sortKey.field,s.sortKey.sort,!0):(layui.each(u,function(i,n){var c=[],u=[],f=[],v=i+d.limit*(l-1)+1;0!==n.length&&(o||(n[r.config.indexName]=i),s.eachCols(function(l,o){var s=o.field||l,h=d.index+"-"+o.key,y=n[s];if(void 0!==y&&null!==y||(y=""),!o.colGroup){var g=['<td data-field="'+s+'" data-key="'+h+'" '+function(){var e=[];return o.edit&&e.push('data-edit="'+o.edit+'"'),o.align&&e.push('align="'+o.align+'"'),o.templet&&e.push('data-content="'+y+'"'),o.toolbar&&e.push('data-off="true"'),o.event&&e.push('lay-event="'+o.event+'"'),o.style&&e.push('style="'+o.style+'"'),o.minWidth&&e.push('data-minwidth="'+o.minWidth+'"'),e.join(" ")}()+' class="'+function(){var e=[];return o.hide&&e.push(p),o.field||e.push("layui-table-col-special"),e.join(" ")}()+'">','<div class="layui-table-cell laytable-cell-'+function(){return"normal"===o.type?h:h+" laytable-cell-"+o.type}()+'">'+function(){var l=a.extend(!0,{LAY_INDEX:v},n),c=r.config.checkName;switch(o.type){case"checkbox":return'<input type="checkbox" name="layTableCheckbox" lay-skin="primary" '+function(){return o[c]?(n[c]=o[c],o[c]?"checked":""):l[c]?"checked":""}()+">";case"radio":return l[c]&&(e=i),'<input type="radio" name="layTableRadio_'+d.index+'" '+(l[c]?"checked":"")+' lay-type="layTableRadio">';case"numbers":return v}return o.toolbar?t(a(o.toolbar).html()||"").render(l):o.templet?function(){return"function"==typeof o.templet?o.templet(l):t(a(o.templet).html()||String(y)).render(l)}():y}(),"</div></td>"].join("");c.push(g),o.fixed&&"right"!==o.fixed&&u.push(g),"right"===o.fixed&&f.push(g)}}),h.push('<tr data-index="'+i+'">'+c.join("")+"</tr>"),y.push('<tr data-index="'+i+'">'+u.join("")+"</tr>"),g.push('<tr data-index="'+i+'">'+f.join("")+"</tr>"))}),s.layBody.scrollTop(0),!u.length||s.layMain.find("."+f).remove(),s.layMain.find("tbody").html(h.join("")),s.layFixLeft.find("tbody").html(y.join("")),s.layFixRight.find("tbody").html(g.join("")),s.renderForm(),"number"==typeof e&&s.setThisRowChecked(e),s.syncCheckAll(),s.haveInit?s.scrollPatch():setTimeout(function(){s.scrollPatch()},50),s.haveInit=!0,n.close(s.tipsIndex),d.HAS_SET_COLS_PATCH||s.setColsPatch(),void(d.HAS_SET_COLS_PATCH=!0))};return s.key=d.id||d.index,r.cache[s.key]=u,s.layPage[0==c||0===u.length&&1==l?"addClass":"removeClass"](p),o?v():0===u.length?(s.renderForm(),s.layFixed.addClass(p),s.layMain.find("tbody").html(""),s.layMain.find("."+f).remove(),s.layMain.append('<div class="'+f+'">'+d.text.none+"</div>")):(v(),s.renderTotal(u),void(d.page&&(d.page=a.extend({elem:"layui-table-page"+d.index,count:c,limit:d.limit,limits:d.limits||[10,20,30,40,50,60,70,80,90],groups:3,layout:["prev","page","next","skip","count","limit"],prev:'<i class="layui-icon">&#xe603;</i>',next:'<i class="layui-icon">&#xe602;</i>',jump:function(e,a){a||(s.page=e.curr,d.limit=e.limit,s.loading(),s.pullData(e.curr))}},d.page),d.page.count=c,i.render(d.page))))};var O=r.Class.prototype.setColsWidth;r.Class.prototype.setColsWidth=function(){var e=this;e.layBox.find("."+y).remove(),O.call(e);var t=e.config,i=(t.id,e.elem);if(t.cols.length>1){var n=e.layFixed.find(g).find("th"),l=e.layHeader.height();l/=t.cols.length,n.each(function(e,t){t=a(t),t.height(l*parseInt(t.attr("rowspan")||1)-1-parseFloat(t.css("padding-top"))-parseFloat(t.css("padding-bottom")))})}if(i.data("patch")===!0){i.data("patch",null);var r=i.find("."+f);if(r.length){e.layFixed.find("tbody").html(""),e.layFixed.addClass(p);var c=['<table cellspacing="0" cellpadding="0" border="0" class="layui-table"><tbody></tbody></table>'],o=r.prev();o&&o.length||a(c.join("")).insertBefore(r),e.layTotal.addClass(p),e.layPage.addClass(p)}else e.layFixLeft.removeClass(p),e.layTotal.removeClass(p),e.layBody.scrollTop(0);e.renderForm("checkbox")}},r.Class.prototype.setInit=function(e){var a=this,t=a.config;return t.clientWidth=t.width||function(){var e=function(a){var i,n;a=a||t.elem.parent(),i=a.width();try{n="none"===a.css("display")}catch(l){}return!a[0]||i&&!n?i:e(a.parent())};return e()}(),"width"===e?t.clientWidth:void layui.each(t.cols,function(e,i){layui.each(i,function(n,l){if(!l)return void i.splice(n,1);if(l.key=e+"-"+n,l.hide=l.hide||!1,l.colGroup||l.colspan>1){var r=0;layui.each(t.cols[e+(parseInt(l.rowspan)||1)],function(a,t){t.HAS_PARENT||r>1&&r==l.colspan||(t.HAS_PARENT=!0,t.parentKey=e+"-"+n,r+=parseInt(t.colspan>1?t.colspan:1))}),l.colGroup=!0}a.initOpts(l)})})};var S=r.Class.prototype.reload;r.Class.prototype.reload=function(e){var a=this;r.reload(a.config.id,e,!0)},r.eachCols=function(e,t,i){var n=this,l=n.thisTable.config[e]||{},r=[],c=0;i=a.extend(!0,[],i||l.cols),layui.each(i,function(e,a){layui.each(a,function(a,t){if(t.colGroup){var n=0;c++,t.CHILD_COLS=[],layui.each(i[e+(parseInt(t.rowspan)||1)],function(e,a){a.PARENT_COL_INDEX||n>1&&n==t.colspan||(a.PARENT_COL_INDEX=c,t.CHILD_COLS.push(a),n+=parseInt(a.colspan>1?a.colspan:1))})}t.PARENT_COL_INDEX||r.push(t)})});var o=function(e){layui.each(e||r,function(e,a){return a.CHILD_COLS?o(a.CHILD_COLS):void("function"==typeof t&&t(e,a))})};o()}}var I=r.render;r.render=function(e){var t=this,i=a.extend(!0,{},r.config,e),n=i.id||a(i.elem).attr("id");x.check(n)||x.init(n,i.checkStatus?i.checkStatus["default"]||[]:[]),i.checkDisabled&&C(i.checkDisabled.data)&&i.checkDisabled.data.length&&x.disabled(n,C(i.checkDisabled.data)?i.checkDisabled.data:[]);var l=i.parseData;l&&l.plugFlag||(e.parseData=function(e){var a=this;e="function"==typeof l?l.call(a,e)||e:e;var t=i.response?i.response.dataName||"data":"data";return D(e[t],a.id),e},e.parseData.plugFlag=!0);var c=i.done;if(c&&c.plugFlag||(e.done=function(e,a,t){var i=this,n=i.id;T(n),"function"==typeof c&&c.call(i,e,a,t)},e.done.plugFlag=!0),i.colFilterRecord){var s=j.get(n,e.colFilterRecord);a.each(e.cols,function(e,t){a.each(t,function(e,a){a.hide=!!s[a.field]})})}else j.clear(n);e.cols.length>1&&layui.each(e.cols,function(e,a){layui.each(a,function(e,a){a.field||a.toolbar||a.colspan&&1!==a.colspan||b.indexOf(a.type)!==-1?!a[v]||a.colspan>1||(a[v]=!1):a[v]=!0})});var d=I.call(t,e),u=d.config,h=u.elem.next();h.attr("lay-id")!==u.id&&h.attr("lay-id",u.id);var f=k(u.id);return f&&(d.setColsWidth(),f.config.url&&f.loading()),o[u.id]=d};var P=r.reload,A=function(){var e=["url","method","where","contentType","headers","parseData","request","response","data","page","initSort","autoSort"];return{getParams:function(){return e},registParams:function(){var a=this;layui.each(arguments,function(t,i){C(i)?a.registParams.apply(a,i):"string"==typeof i&&e.indexOf(i)===-1&&e.push(i)})}}}(),L=function(){var e=!1;return{enable:function(){if(!arguments.length)return e;var a=arguments[0];"boolean"!=typeof a?c.error("如果要开启或者关闭全局的表格智能重载模式，请传入一个true/false为参数"):e=a}}}();A.registParams("colFilterRecord","checkStatus","smartReloadModel","checkDisabled"),r.reload=function(e,t,i){var n=this,l=F(e),s=a.extend(!0,{},F(e),t);if(s.checkStatus||x.reset(e),L.enable()&&s.smartReloadModel){var d=!1;if(!!s.page!=!!l.page&&(d=!0),!d){var u=a.extend(!0,[],A.getParams());layui.each(t,function(e,a){var t=u.indexOf(e);return t===-1?d=!0:void u.splice(t,1)})}if(!d){if(m){var h=k(e);return"object"==typeof t.page&&(t.page.curr&&(h.page=t.page.curr),delete t.elem,delete t.jump),i?a.extend(h.config,t):a.extend(!0,h.config,t),h.config.page||(h.page=1),h.elem.data("patch",!0),h.loading(),h.pullData(h.page),r.thisTable.call(h)}c.error("您开启了智能重载模式smartReloadModel，但是未检测到一个必要的前提，另参考帖子 https://fly.layui.com/jie/43423/ 里面的相关内容将table.js进行一个非常小的改造，之后再试试看。")}}if(!i||!m){var h=P.call(n,e,t);return o[e]=h}S.call(k(e),t),o[e].config=k(e).config};var F=function(e){return o[e]&&o[e].config},E=r.checkStatus;r.checkStatus=function(e){var a=this,t=E.call(a,e),i=F(e);if(i&&i.checkStatus&&(t.status=x.get(e)),i&&i.checkDisabled){var n=i.checkDisabled;if("object"==typeof n&&n.enabled!==!1){var l=0,c=0,o=n.primaryKey,s=x.get(e,h);layui.each(r.cache[e],function(e,a){var t=a[o];s.indexOf(t)===-1&&(l++,a[r.config.checkName]&&c++)}),t.isAll=c>0&&l===c}}return t};var R=function(e,a,t){return!x.checkDisabled(e,a)&&void x.update(e,a,t)};r.on("checkbox",function(e){var t=a(this).closest(".layui-table-view"),i=t.attr("lay-id"),n=F(i);if(x.check(i)){var c=e.checked,o=e.data,s=e.type,d=n.checkStatus?n.checkStatus.primaryKey||"id":"id";if("one"===s)R(i,o[d],c);else if("all"===s){var u=!1;layui.each(layui.table.cache[i],function(e,a){var n=R(i,a[d],c);if(n===!1){u=!0;var l=x.getChecked(i).indexOf(a[d])!==-1;t.find(".layui-table-body").find('tr[data-index="'+e+'"]').find('input[name="layTableCheckbox"]').prop("checked",l),a[r.config.checkName]=l}}),u&&l.render("checkbox",t.attr("lay-filter"))}}}),l.on("checkbox",function(e){a(e.elem).change()});var j=function(){var e="tablePlug_col_filter_record",t=function(e){return"local"===e?"data":"sessionData"};return{set:function(a,i,n,l){if(a&&i){var r=t(l),c=this.get(a,l);c[i]=!n,layui[r](e,{key:a,value:c})}},get:function(a,i){return layui[t(i)](e)[a]||{}},clear:function(t){a.each(["data","sessionData"],function(a,i){layui[i](e,{key:t,remove:!0})})}}}();a(document).on("change",'input[lay-filter="LAY_TABLE_TOOL_COLS"]',function(e){var t=a(this),i=t.attr("name"),n=t.closest(".layui-table-view"),l=n.attr("lay-id"),r=F(l),c=r.colFilterRecord;c?j.set(l,i,this.checked,c):j.clear(l)}),a(document).off("mousedown",".layui-table-grid-down").on("mousedown",".layui-table-grid-down",function(e){r._tableTrCurr=a(this).closest("td")}),a(document).off("click",".layui-table-tips-main [lay-event]").on("click",".layui-table-tips-main [lay-event]",function(e){var t=a(this),i=r._tableTrCurr;if(i){var l=t.closest(".layui-table-tips").attr("times");n.close(l),r._tableTrCurr.find('[lay-event="'+t.attr("lay-event")+'"]').first().click()}}),r.on("sort()",function(e){var a=this.closest(".layui-table-view").attr("lay-id");F(a).autoSort&&T(a)});var N={CHECK_TYPE_ADDITIONAL:s,CHECK_TYPE_REMOVED:d,CHECK_TYPE_ORIGINAL:u,tableCheck:x,colFilterRecord:j,getConfig:F,getIns:function(e){return o[e]},disabledCheck:function(e,a){var t=this;x.disabled(e,a||[]),T.call(t,e,!0)},queryParams:A,smartReload:L};e("tablePlug",N)});