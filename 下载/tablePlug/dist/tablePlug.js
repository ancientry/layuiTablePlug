/** layui-v2.4.5 MIT License By https://www.layui.com */
 ;layui.define(["table"],function(e){"use strict";var a=layui.$,t=layui.laytpl,i=layui.laypage,n=layui.layer,l=layui.form,c=(layui.util,layui.table),r=layui.hint(),o=(layui.device(),{}),s="additional",d="removed",u="original",h="disabled",f="layui-none",p="layui-hide",y="layui-tablePlug-loading-p",g=".layui-table-header",v="colGroup",b=["numbers","checkbox","radio"],m=function(){return!(!c.thisTable||!c.Class)}(),x=function(e){return m?c.thisTable.that[e]:(r.error("getIns方法需要在对layui的table进行一定必要的改造才能使用！请到 https://fly.layui.com/jie/43423/ 里面的查看相关内容将table.js进行一个非常小的改造，之后再试试看。"),{})},k=function(){var e={};return{check:function(a){return!!e[a]},reset:function(a){e[a]?(this.set(a,s,[]),this.set(a,d,[])):(e[a]={},e[a][u]=[],e[a][s]=[],e[a][d]=[],e[a][h]=[])},init:function(e,a){this.reset(e),this.set(e,u,a)},disabled:function(a,t){e[a]||this.reset(a),this.set(a,h,t)},checkDisabled:function(e,a){return this.get(e,h).indexOf(a)!==-1},getChecked:function(e){var a=this.get(e,d),t=this.get(e,u).concat(this.get(e,s)),i=[];return layui.each(t,function(e,t){a.indexOf(t)===-1&&i.indexOf(t)===-1&&i.push(t)}),i},get:function(a,t){return t===s||t===d||t===u||t===h?e[a]?e[a][t]||[]:[]:e[a]},set:function(a,t,i){t!==u&&t!==s&&t!==d&&t!==h||(e[a][t]=i&&C(i)?i:[])},update:function(a,t,i){var n=e[a][u],l=e[a][s],c=e[a][d];i?n.indexOf(t)===-1?l.indexOf(t)===-1&&l.push(t):c.indexOf(t)!==-1&&c.splice(c.indexOf(t),1):n.indexOf(t)===-1?l.indexOf(t)!==-1&&l.splice(l.indexOf(t),1):c.indexOf(t)===-1&&c.push(t)}}}(),C=function(e){return"[object Array]"===Object.prototype.toString.call(e)},D=function(e,a,t){if(e&&a)for(var i=k.get(a,s)||[],n=k.get(a,u)||[],l=k.get(a,d)||[],r=i.concat(n.filter(function(e,a){return l.indexOf(e)===-1})),o=0;o<e.length;o++)r.indexOf(e[o].id)!==-1&&(e[o][t||c.config.checkName]=!0)},O=c.Class.prototype.sort;c.Class.prototype.sort=function(){var e=this,a=[];layui.each(arguments,function(e,t){a.push(t)}),O.apply(e,a)};var T=c.Class.prototype.loading;c.Class.prototype.loading=function(e){var t=this;if(T.call(t,e),!e&&t.layInit){t.layInit.remove(),t.layInit.addClass("layui-anim layui-anim-rotate layui-anim-loop"),t.layMain.height()||t.layBox.append(a('<div class="'+y+'" style="height: 56px;"></div>'));var i=0;t.layMain.height()-t.layMain.prop("clientHeight")>0&&(i=t.getScrollWidth()),t.layInit.height(t.layBox.height()-t.layHeader.height()-i).css("marginTop",t.layHeader.height()+"px"),t.layBox.append(t.layInit)}},c.Class.prototype.renderData=function(e,l,r,o){var s=this,d=s.config,u=e[d.response.dataName]||[],h=[],y=[],g=[],v=function(){var e;return!o&&s.sortKey?s.sort(s.sortKey.field,s.sortKey.sort,!0):(layui.each(u,function(i,n){var r=[],u=[],f=[],v=i+d.limit*(l-1)+1;0!==n.length&&(o||(n[c.config.indexName]=i),s.eachCols(function(l,o){var s=o.field||l,h=d.index+"-"+o.key,y=n[s];if(void 0!==y&&null!==y||(y=""),!o.colGroup){var g=['<td data-field="'+s+'" data-key="'+h+'" '+function(){var e=[];return o.edit&&e.push('data-edit="'+o.edit+'"'),o.align&&e.push('align="'+o.align+'"'),o.templet&&e.push('data-content="'+y+'"'),o.toolbar&&e.push('data-off="true"'),o.event&&e.push('lay-event="'+o.event+'"'),o.style&&e.push('style="'+o.style+'"'),o.minWidth&&e.push('data-minwidth="'+o.minWidth+'"'),e.join(" ")}()+' class="'+function(){var e=[];return o.hide&&e.push(p),o.field||e.push("layui-table-col-special"),e.join(" ")}()+'">','<div class="layui-table-cell laytable-cell-'+function(){return"normal"===o.type?h:h+" laytable-cell-"+o.type}()+'">'+function(){var l=a.extend(!0,{LAY_INDEX:v},n),r=c.config.checkName;switch(o.type){case"checkbox":return'<input type="checkbox" name="layTableCheckbox" lay-skin="primary" '+function(){return o[r]?(n[r]=o[r],o[r]?"checked":""):l[r]?"checked":""}()+">";case"radio":return l[r]&&(e=i),'<input type="radio" name="layTableRadio_'+d.index+'" '+(l[r]?"checked":"")+' lay-type="layTableRadio">';case"numbers":return v}return o.toolbar?t(a(o.toolbar).html()||"").render(l):o.templet?function(){return"function"==typeof o.templet?o.templet(l):t(a(o.templet).html()||String(y)).render(l)}():y}(),"</div></td>"].join("");r.push(g),o.fixed&&"right"!==o.fixed&&u.push(g),"right"===o.fixed&&f.push(g)}}),h.push('<tr data-index="'+i+'">'+r.join("")+"</tr>"),y.push('<tr data-index="'+i+'">'+u.join("")+"</tr>"),g.push('<tr data-index="'+i+'">'+f.join("")+"</tr>"))}),s.layBody.scrollTop(0),!u.length||s.layMain.find("."+f).remove(),s.layMain.find("tbody").html(h.join("")),s.layFixLeft.find("tbody").html(y.join("")),s.layFixRight.find("tbody").html(g.join("")),s.renderForm(),"number"==typeof e&&s.setThisRowChecked(e),s.syncCheckAll(),s.haveInit?s.scrollPatch():setTimeout(function(){s.scrollPatch()},50),s.haveInit=!0,n.close(s.tipsIndex),d.HAS_SET_COLS_PATCH||s.setColsPatch(),void(d.HAS_SET_COLS_PATCH=!0))};return s.key=d.id||d.index,c.cache[s.key]=u,s.layPage[0==r||0===u.length&&1==l?"addClass":"removeClass"](p),o?v():0===u.length?(s.renderForm(),s.layFixed.addClass(p),s.layMain.find("tbody").html(""),s.layMain.find("."+f).remove(),s.layMain.append('<div class="'+f+'">'+d.text.none+"</div>")):(v(),s.renderTotal(u),void(d.page&&(d.page=a.extend({elem:"layui-table-page"+d.index,count:r,limit:d.limit,limits:d.limits||[10,20,30,40,50,60,70,80,90],groups:3,layout:["prev","page","next","skip","count","limit"],prev:'<i class="layui-icon">&#xe603;</i>',next:'<i class="layui-icon">&#xe602;</i>',jump:function(e,a){a||(s.page=e.curr,d.limit=e.limit,s.loading(),s.pullData(e.curr))}},d.page),d.page.count=r,i.render(d.page))))};var _=function(e,a){var t=x(e);if(t){var i=t.config;a&&(i.checkDisabled=i.checkDisabled||{},i.checkDisabled.enabled=i.checkDisabled.enabled||!0,i.checkDisabled.primaryKey=i.checkDisabled.primaryKey||"id",i.checkDisabled.data=k.get(e,h)||[]),i.checkDisabled.enabled?layui.each(c.cache[e],function(a,n){t.elem.find(".layui-table-body").find('tr[data-index="'+a+'"]').find('input[name="layTableCheckbox"]').prop("disabled",k.checkDisabled(e,n[i.checkDisabled.primaryKey]))}):k.set(e,h,[]),t.layBox.find('input[lay-filter="layTableAllChoose"]').prop("checked",c.checkStatus(e).isAll),t.renderForm("checkbox")}},I=c.Class.prototype.setColsWidth;c.Class.prototype.setColsWidth=function(){var e=this;e.layBox.find("."+y).remove(),I.call(e);var t=e.config,i=t.id,n=e.elem;if(t.cols.length>1){var l=e.layFixed.find(g).find("th"),c=e.layHeader.height();c/=t.cols.length,l.each(function(e,t){t=a(t),t.height(c*parseInt(t.attr("rowspan")||1)-1-parseFloat(t.css("padding-top"))-parseFloat(t.css("padding-bottom")))})}if(k.get(t.id,h).length&&_(i),n.data("patch")===!0){n.data("patch",null);var r=n.find("."+f);if(r.length){e.layFixed.find("tbody").html(""),e.layFixed.addClass(p);var o=['<table cellspacing="0" cellpadding="0" border="0" class="layui-table"><tbody></tbody></table>'],s=r.prev();s&&s.length||a(o.join("")).insertBefore(r),e.layTotal.addClass(p),e.layPage.addClass(p)}else e.layFixLeft.removeClass(p),e.layTotal.removeClass(p),e.layBody.scrollTop(0);e.renderForm("checkbox")}},c.Class.prototype.setInit=function(e){var a=this,t=a.config;return t.clientWidth=t.width||function(){var e=function(a){var i,n;a=a||t.elem.parent(),i=a.width();try{n="none"===a.css("display")}catch(l){}return!a[0]||i&&!n?i:e(a.parent())};return e()}(),"width"===e?t.clientWidth:void layui.each(t.cols,function(e,i){layui.each(i,function(n,l){if(!l)return void i.splice(n,1);if(l.key=e+"-"+n,l.hide=l.hide||!1,l.colGroup||l.colspan>1){var c=0;layui.each(t.cols[e+(parseInt(l.rowspan)||1)],function(a,t){t.HAS_PARENT||c>1&&c==l.colspan||(t.HAS_PARENT=!0,t.parentKey=e+"-"+n,c+=parseInt(t.colspan>1?t.colspan:1))}),l.colGroup=!0}a.initOpts(l)})})};var S=c.Class.prototype.reload;c.Class.prototype.reload=function(e){var a=this;c.reload(a.config.id,e,!0)},c.eachCols=function(e,t,i){var n=this,l=n.thisTable.config[e]||{},c=[],r=0;i=a.extend(!0,[],i||l.cols),layui.each(i,function(e,a){layui.each(a,function(a,t){if(t.colGroup){var n=0;r++,t.CHILD_COLS=[],layui.each(i[e+(parseInt(t.rowspan)||1)],function(e,a){a.PARENT_COL_INDEX||n>1&&n==t.colspan||(a.PARENT_COL_INDEX=r,t.CHILD_COLS.push(a),n+=parseInt(a.colspan>1?a.colspan:1))})}t.PARENT_COL_INDEX||c.push(t)})});var o=function(e){layui.each(e||c,function(e,a){return a.CHILD_COLS?o(a.CHILD_COLS):void("function"==typeof t&&t(e,a))})};o()};var P=c.render;c.render=function(e){var t=this,i=a.extend(!0,{},c.config,e),n=i.id||a(i.elem).attr("id");i.checkStatus&&!k.check(n)&&k.init(n,i.checkStatus["default"]),i.checkDisabled&&C(i.checkDisabled.data)&&i.checkDisabled.data.length&&k.disabled(n,C(i.checkDisabled.data)?i.checkDisabled.data:[]);var l=i.parseData;if(l&&l.plugFlag||(e.parseData=function(e){e="function"==typeof l?l.call(t,e)||e:e;var a=i.response?i.response.dataName||"data":"data";return D(e[a],n),e},e.parseData.plugFlag=!0),i.colFilterRecord){var r=N.get(n,e.colFilterRecord);a.each(e.cols,function(e,t){a.each(t,function(e,a){a.hide=!!r[a.field]})})}else N.clear(n);e.cols.length>1&&layui.each(e.cols,function(e,a){layui.each(a,function(e,a){a.field||a.toolbar||a.colspan&&1!==a.colspan||b.indexOf(a.type)!==-1?!a[v]||a.colspan>1||(a[v]=!1):a[v]=!0})});var s=P.call(t,e),d=s.config.elem.next();d.attr("lay-id")!==s.config.id&&d.attr("lay-id",s.config.id);var u=x(s.config.id);return u&&u.index&&(u.setColsWidth(),u.config.url&&u.loading()),o[s.config.id]=s};var A=c.reload,L=function(){var e=["url","method","where","contentType","headers","parseData","request","response","data","page","initSort","autoSort"];return{getParams:function(){return e},registParams:function(){var a=this;layui.each(arguments,function(t,i){C(i)?a.registParams.apply(a,i):"string"==typeof i&&e.indexOf(i)===-1&&e.push(i)})},check:function(){}}}(),F=function(){var e=!1;return{enable:function(){if(!arguments.length)return e;var a=arguments[0];"boolean"!=typeof a?r.error("如果要开启或者关闭全局的表格智能重载模式，请传入一个true/false为参数"):e=a}}}();L.registParams("colFilterRecord","checkStatus","smartReloadModel","checkDisabled"),c.reload=function(e,t,i){var n=this,l=j(e),s=a.extend(!0,{},j(e),t);if(F.enable()&&s.smartReloadModel){var d=!1;if(!!s.page!=!!l.page&&(d=!0),!d){var u=a.extend(!0,[],L.getParams());layui.each(t,function(e,a){var t=u.indexOf(e);return t===-1?d=!0:void u.splice(t,1)})}if(!d){if(m){var h=x(e);return"object"==typeof t.page&&(t.page.curr&&(h.page=t.page.curr),delete t.elem,delete t.jump),i?a.extend(h.config,t):a.extend(!0,h.config,t),h.config.page||(h.page=1),h.elem.data("patch",!0),h.loading(),h.pullData(h.page),c.thisTable.call(h)}r.error("您开启了智能重载模式，但是未检测到一个必要的前提，另参考帖子 https://fly.layui.com/jie/43423/ 里面的相关内容将table.js进行一个非常小的改造，之后再试试看。")}}if(!i){var h=A.call(n,e,t);return o[e]=h}S.call(x(e),t),o[e].config=x(e).config};var j=function(e){return o[e]&&o[e].config},E=c.checkStatus;c.checkStatus=function(e){var a=this,t=x(e),i=t.config,n=E.call(a,e);if(i&&i.checkStatus&&(n.status=k.get(e)),i.checkDisabled){var l=i.checkDisabled;if("object"==typeof l&&l.enabled!==!1){var r=0,o=0,s=l.primaryKey,d=k.get(e,h);layui.each(c.cache[e],function(e,a){var t=a[s];d.indexOf(t)===-1&&(r++,a[c.config.checkName]&&o++)}),n.isAll=o>0&&r===o}}return n};var R=function(e,a,t){return!k.checkDisabled(e,a)&&void k.update(e,a,t)};c.on("checkbox",function(e){var t=a(this).closest(".layui-table-view"),i=t.attr("lay-id"),n=j(i);if(n.page&&n.checkStatus&&k.check(i)){var l=e.checked,r=e.data,o=e.type,s=n.checkStatus.primaryKey||"id";if("one"===o)R(i,r[s],l);else if("all"===o){var d=!1;layui.each(layui.table.cache[i],function(e,a){var n=R(i,a[s],l);if(n===!1){d=!0;var r=k.getChecked(i).indexOf(a[s])!==-1;t.find(".layui-table-body").find('tr[data-index="'+e+'"]').find('input[name="layTableCheckbox"]').prop("checked",r),a[c.config.checkName]=r}}),d&&x(i).renderForm("checkbox")}}}),l.on("checkbox",function(e){a(e.elem).change()});var N=function(){var e="tablePlug_col_filter_record",t=function(e){return"local"===e?"data":"sessionData"};return{set:function(a,i,n,l){if(a&&i){var c=t(l),r=this.get(a,l);r[i]=!n,layui[c](e,{key:a,value:r})}},get:function(a,i){return layui[t(i)](e)[a]||{}},clear:function(t){a.each(["data","sessionData"],function(a,i){layui[i](e,{key:t,remove:!0})})}}}();a(document).on("change",'input[lay-filter="LAY_TABLE_TOOL_COLS"]',function(e){var t=a(this),i=t.attr("name"),n=t.closest(".layui-table-view"),l=n.attr("lay-id"),c=j(l),r=c.colFilterRecord;r?N.set(l,i,this.checked,r):N.clear(l)});var H={CHECK_TYPE_ADDITIONAL:s,CHECK_TYPE_REMOVED:d,CHECK_TYPE_ORIGINAL:u,tableCheck:k,colFilterRecord:N,getConfig:j,getIns:function(e){return o[e]},disabledCheck:function(e,a){var t=this;k.disabled(e,a||[]),_.call(t,e,!0)},queryParams:L,smartReload:F};e("tablePlug",H)});