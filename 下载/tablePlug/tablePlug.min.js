/** layui-v2.4.5 MIT License By https://www.layui.com */
 ;layui.define(["table"],function(e){"use strict";function a(e){return{top:e.offset().top-i("body").offset().top-i(document).scrollTop(),left:e.offset().left-i("body").offset().left-i(document).scrollLeft()}}layui.link(layui.cache.modules.tablePlug.substr(0,layui.cache.modules.tablePlug.lastIndexOf("/"))+"/tablePlug.css"),layui.link(layui.cache.modules.tablePlug.substr(0,layui.cache.modules.tablePlug.lastIndexOf("/"))+"/icon/iconfont.css");var t,i=layui.$,l=layui.laytpl,n=layui.laypage,o=layui.layer,c=layui.form,r=(layui.util,layui.table),d=layui.hint(),s=(layui.device(),{}),u={},f="additional",h="removed",y="original",p="disabled",g="layui-none",b="layui-hide",v="layui-tablePlug-loading-p",m=".layui-table-header",x="colGroup",k=["numbers","checkbox","radio"],C=['<span class="layui-table-filter layui-inline">','<span class="layui-tablePlug-icon layui-tablePlug-icon-filter"></span>',"</span>"],T=function(){return!(!r.thisTable||!r.Class)}(),D=function(e){if(T)return r.thisTable.that[e]},P=function(){var e={};return{check:function(a){return!!e[a]},reset:function(a){e[a]?(this.set(a,f,[]),this.set(a,h,[])):(e[a]={},e[a][y]=[],e[a][f]=[],e[a][h]=[],e[a][p]=[])},init:function(e,a){this.reset(e),this.set(e,y,a)},disabled:function(a,t){e[a]||this.reset(a),this.set(a,p,t)},checkDisabled:function(e,a){return this.get(e,p).indexOf(a)!==-1},getChecked:function(e){var a=this.get(e,h),t=this.get(e,y).concat(this.get(e,f)),i=[];return layui.each(t,function(e,t){a.indexOf(t)===-1&&i.indexOf(t)===-1&&i.push(t)}),i},get:function(a,t){return t===f||t===h||t===y||t===p?e[a]?e[a][t]||[]:[]:e[a]},set:function(a,t,i){t!==y&&t!==f&&t!==h&&t!==p||(e[a][t]=i&&L(i)?i:[])},update:function(a,t,i){var l=e[a][y],n=e[a][f],o=e[a][h];i?l.indexOf(t)===-1?n.indexOf(t)===-1&&n.push(t):o.indexOf(t)!==-1&&o.splice(o.indexOf(t),1):l.indexOf(t)===-1?n.indexOf(t)!==-1&&n.splice(n.indexOf(t),1):o.indexOf(t)===-1&&o.push(t)}}}(),L=function(e){return"[object Array]"===Object.prototype.toString.call(e)},O=function(e,a,t){if(e&&a&&(t=t||E(a),t&&t.checkStatus))for(var i=P.getChecked(a),l=0;l<e.length;l++)e[l][r.config.checkName]=i.indexOf(e[l][t.checkStatus.primaryKey||"id"])!==-1},_=function(e,a){var t=E(e);if(t){var i=t.elem.next();a&&(t.checkDisabled=t.checkDisabled||{},t.checkDisabled.enabled=t.checkDisabled.enabled||!0,t.checkDisabled.primaryKey=t.checkDisabled.primaryKey||"id",t.checkDisabled.data=P.get(e,p)||[]),t.checkDisabled&&t.checkDisabled.enabled?layui.each(r.cache[e],function(a,l){i.find(".layui-table-body").find('tr[data-index="'+a+'"]').find('input[name="layTableCheckbox"]').prop("disabled",P.checkDisabled(e,l[t.checkDisabled.primaryKey]))}):P.set(e,p,[]),i.find('input[lay-filter="layTableAllChoose"]').prop("checked",r.checkStatus(e).isAll),c.render("checkbox",i.attr("lay-filter"))}};if(s.set=function(e){i.extend(!0,r.config,e||{})},s.set({pageLanguageText:{en:{jumpTo:"jump to",page:"page",go:"go",total:"total",unit:"",optionText:"limit each page"}}}),T){var S=r.Class.prototype.loading;r.Class.prototype.loading=function(e){var a=this;if(S.call(a,e),!e&&a.layInit){a.layInit.remove(),a.layInit.addClass("layui-anim layui-anim-rotate layui-anim-loop"),a.layMain.height()||a.layBox.append(i('<div class="'+v+'" style="height: 56px;"></div>'));var t=0;a.layMain.height()-a.layMain.prop("clientHeight")>0&&(t=a.getScrollWidth()),a.layInit.height(a.layBox.height()-a.layHeader.height()-t).css("marginTop",a.layHeader.height()+"px"),a.layBox.append(a.layInit)}},r.Class.prototype.renderData=function(e,a,t,c){var d=this,s=d.config,u=e[s.response.dataName]||[],f=[],h=[],y=[],p=function(){var e;return!c&&d.sortKey?d.sort(d.sortKey.field,d.sortKey.sort,!0):(layui.each(u,function(t,n){var o=[],u=[],p=[],g=t+s.limit*(a-1)+1;0!==n.length&&(c||(n[r.config.indexName]=t),d.eachCols(function(a,c){var d=c.field||a,f=s.index+"-"+c.key,h=n[d];if(void 0!==h&&null!==h||(h=""),!c.colGroup){var y=['<td data-field="'+d+'" data-key="'+f+'" '+function(){var e=[];return c.edit&&e.push('data-edit="'+c.edit+'"'),c.align&&e.push('align="'+c.align+'"'),c.templet&&e.push('data-content="'+h+'"'),c.toolbar&&e.push('data-off="true"'),c.event&&e.push('lay-event="'+c.event+'"'),c.style&&e.push('style="'+c.style+'"'),c.minWidth&&e.push('data-minwidth="'+c.minWidth+'"'),e.join(" ")}()+' class="'+function(){var e=[];return c.hide&&e.push(b),c.field||e.push("layui-table-col-special"),e.join(" ")}()+'">','<div class="layui-table-cell laytable-cell-'+function(){return"normal"===c.type?f:f+" laytable-cell-"+c.type}()+'">'+function(){var a=i.extend(!0,{LAY_INDEX:g},n),o=r.config.checkName;switch(c.type){case"checkbox":return'<input type="checkbox" name="layTableCheckbox" lay-skin="primary" '+function(){return c[o]?(n[o]=c[o],c[o]?"checked":""):a[o]?"checked":""}()+">";case"radio":return a[o]&&(e=t),'<input type="radio" name="layTableRadio_'+s.index+'" '+(a[o]?"checked":"")+' lay-type="layTableRadio">';case"numbers":return g}return c.toolbar?l(i(c.toolbar).html()||"").render(a):c.templet?function(){return"function"==typeof c.templet?c.templet(a):l(i(c.templet).html()||String(h)).render(a)}():h}(),"</div></td>"].join("");o.push(y),c.fixed&&"right"!==c.fixed&&u.push(y),"right"===c.fixed&&p.push(y)}}),f.push('<tr data-index="'+t+'">'+o.join("")+"</tr>"),h.push('<tr data-index="'+t+'">'+u.join("")+"</tr>"),y.push('<tr data-index="'+t+'">'+p.join("")+"</tr>"))}),d.layBody.scrollTop(0),!u.length||d.layMain.find("."+g).remove(),d.layMain.find("tbody").html(f.join("")),d.layFixLeft.find("tbody").html(h.join("")),d.layFixRight.find("tbody").html(y.join("")),d.renderForm(),"number"==typeof e&&d.setThisRowChecked(e),d.syncCheckAll(),d.haveInit?d.scrollPatch():setTimeout(function(){d.scrollPatch()},50),d.haveInit=!0,o.close(d.tipsIndex),s.HAS_SET_COLS_PATCH||d.setColsPatch(),void(s.HAS_SET_COLS_PATCH=!0))};return d.key=s.id||s.index,r.cache[d.key]=u,d.layPage[0==t||0===u.length&&1==a?"addClass":"removeClass"](b),c?p():0===u.length?(d.renderForm(),d.layFixed.addClass(b),d.layMain.find("tbody").html(""),d.layMain.find("."+g).remove(),d.layMain.append('<div class="'+g+'">'+s.text.none+"</div>")):(p(),d.renderTotal(u),void(s.page&&(s.page=i.extend({elem:"layui-table-page"+s.index,count:t,limit:s.limit,limits:s.limits||[10,20,30,40,50,60,70,80,90],groups:3,layout:["prev","page","next","skip","count","limit"],prev:'<i class="layui-icon">&#xe603;</i>',next:'<i class="layui-icon">&#xe602;</i>',jump:function(e,a){if(a||(d.page=e.curr,s.limit=e.limit,d.loading(),d.pullData(e.curr)),d.config.pageLanguage&&d.config.pageLanguage!==!0){var t;if("string"==typeof d.config.pageLanguage){if(!r.config.pageLanguageText[d.config.pageLanguage])return void console.log("找不到"+d.config.pageLanguage+"对应的语言文本定义");t=r.config.pageLanguageText[d.config.pageLanguage]}else{if("object"!=typeof d.config.pageLanguage)return;var l=d.config.pageLanguage.lan;if(!l)return;t=i.extend({},r.config.pageLanguageText[l],d.config.pageLanguage.text||{})}if(!t)return;var n=d.layPage.find(">div");n.addClass(b);var o=n.find(".layui-laypage-skip"),c=o.find("input"),u=o.find("button");o.html(t.jumpTo||"jump to"),c.appendTo(o),o.append(t.page||"page"),u.html(t.go||"go").appendTo(o);var f=n.find(".layui-laypage-count"),h=f.text();f.html((t.total||"total")+" "+h.split(" ")[1]+(t.unit?" "+t.unit:""));var y=n.find(".layui-laypage-limits");layui.each(y.find("option"),function(e,a){a=i(a);var l=a.text();a.html(l.split(" ")[0]+" "+(t.optionText||"limit each page"))}),n.removeClass(b)}}},s.page),s.page.count=t,n.render(s.page))))};var I=r.Class.prototype.setColsWidth;r.Class.prototype.setColsWidth=function(){var e=this;e.layBox.find("."+v).remove(),I.call(e);var l=e.config,n=l.id,c=e.elem,d=c.find("."+g);if(e.elem[d.length&&e.layHeader.first().find(".layui-table").width()-1>e.layHeader.first().width()?"addClass":"removeClass"]("layui-table-none-overflow"),l.cols.length>1){var s=e.layFixed.find(m).find("th"),u=e.layHeader.height();u/=l.cols.length,s.each(function(e,a){a=i(a),a.height(u*parseInt(a.attr("rowspan")||1)-1-parseFloat(a.css("padding-top"))-parseFloat(a.css("padding-bottom")))})}if(r.eachCols(n,function(l,n){if("normal"===n.type){var d=n.field;if(!d)return;var s=c.find('th[data-field="'+d+'"]');n.filter?s.find(".layui-table-filter").length||i(C.join("")).insertAfter(s.find(".layui-table-cell>span:not(.layui-inline)")).click(function(l){layui.stope(l);var n=c.find(".layui-table-filter.layui-active");n.length&&n[0]!==this&&(n.removeClass("layui-active"),e.layBody.find("tr."+b).removeClass(b));var s=c.find(".layui-table-main"),u=[];layui.each(s.find('td[data-field="'+d+'"]'),function(e,a){a=i(a);var t=a.text();u.indexOf(t)===-1&&u.push(t)});var f=200,h=300,y=i(this),p=a(y),g=p.top,v=p.left+y.width();v+f>i(document).width()&&(v-=f+y.width()),t=o.open({content:"",title:null,type:1,area:f+"px",shade:.1,closeBtn:0,fixed:!1,resize:!1,shadeClose:!0,offset:[g+"px",v+"px"],isOutAnim:!1,maxmin:!1,success:function(a,t){a.find(".layui-layer-content").html('<table id="layui-tablePlug-col-filter" lay-filter="layui-tablePlug-col-filter"></table>'),r.render({elem:"#layui-tablePlug-col-filter",data:u.map(function(a,t,l){var n={name:a};return n[r.config.checkName]=!e.layBody.find("tr."+b).filter(function(e,t){return i(t).find('td[data-field="'+d+'"]').text()===a}).length,n}),page:!1,skin:"nob",id:"layui-tablePlug-col-filter-layer",even:!1,height:u.length>8?h:null,size:"sm",style:"margin: 0;",cols:[[{type:"checkbox",width:40},{field:"name",title:'全选<span class="table-filter-opt-invert" onclick="layui.tablePlug && layui.tablePlug.tableFilterInvert(this);">反选</span>'}]]})},end:function(){y[e.layBody.find("tr."+b).length?"addClass":"removeClass"]("layui-active")}}),r.on("checkbox(layui-tablePlug-col-filter)",function(a){"all"===a.type?e.layBody.find("tr")[a.checked?"removeClass":"addClass"](b):layui.each(e.layBody.first().find('tr td[data-field="'+d+'"]'),function(t,l){if(l=i(l),l.text()===a.data.name){var n=l.parent();e.layBody.find('tr[data-index="'+n.data("index")+'"]')[a.checked?"removeClass":"addClass"](b)}}),e.resize()})}):s.find(".layui-table-filter").remove()}}),c.data("patch")===!0){if(c.data("patch",null),d.length){e.layFixed.find("tbody").html(""),e.layFixed.addClass(b);var f=['<table cellspacing="0" cellpadding="0" border="0" class="layui-table"><tbody></tbody></table>'],h=d.prev();h&&h.length||i(f.join("")).insertBefore(d),e.layTotal.addClass(b),e.layPage.addClass(b)}else e.layFixLeft.removeClass(b),e.layTotal.removeClass(b);e.renderForm("checkbox")}e.layBody.scrollTop(0),e.layBody.scrollLeft(0),e.layHeader.scrollLeft(0)},i(window).resize(function(){}),r.Class.prototype.setInit=function(e){var a=this,t=a.config;return t.clientWidth=t.width||function(){var e=function(a){var i,l;a=a||t.elem.parent(),i=a.width();try{l="none"===a.css("display")}catch(n){}return!a[0]||i&&!l?i:e(a.parent())};return e()}(),"width"===e?t.clientWidth:void layui.each(t.cols,function(e,i){layui.each(i,function(l,n){if(!n)return void i.splice(l,1);if(n.key=e+"-"+l,n.hide=n.hide||!1,n.colGroup||n.colspan>1){var o=0;layui.each(t.cols[e+(parseInt(n.rowspan)||1)],function(a,t){t.HAS_PARENT||o>1&&o==n.colspan||(t.HAS_PARENT=!0,t.parentKey=e+"-"+l,o+=parseInt(t.colspan>1?t.colspan:1))}),n.colGroup=!0}a.initOpts(n)})})};var w=r.Class.prototype.reload;r.Class.prototype.reload=function(e){var a=this;r.reload(a.config.id,e,!0)},r.eachCols=function(e,a,t){var l=this,n=l.thisTable.config[e]||{},o=[],c=0;t=i.extend(!0,[],t||n.cols),layui.each(t,function(e,a){layui.each(a,function(a,i){if(i.colGroup){var l=0;c++,i.CHILD_COLS=[],layui.each(t[e+(parseInt(i.rowspan)||1)],function(e,a){a.PARENT_COL_INDEX||l>1&&l==i.colspan||(a.PARENT_COL_INDEX=c,i.CHILD_COLS.push(a),l+=parseInt(a.colspan>1?a.colspan:1))})}i.PARENT_COL_INDEX||o.push(i)})});var r=function(e){layui.each(e||o,function(e,t){return t.CHILD_COLS?r(t.CHILD_COLS):void("function"==typeof a&&a(e,t))})};r()}}var A=r.render;r.render=function(e){var a=this,t=i.extend(!0,{},r.config,e),l=t.id||i(t.elem).attr("id");P.check(l)||P.init(l,t.checkStatus?t.checkStatus["default"]||[]:[]),t.checkDisabled&&L(t.checkDisabled.data)&&t.checkDisabled.data.length&&P.disabled(l,L(t.checkDisabled.data)?t.checkDisabled.data:[]);var n=t.parseData;n&&n.plugFlag||(e.parseData=function(e){var a=this;e="function"==typeof n?n.call(a,e)||e:e;var i=t.response?t.response.dataName||"data":"data";return O(e[i],a.id),e},e.parseData.plugFlag=!0),!e.url&&L(e.data)&&O(e.data,l,t);var o=t.done;if(o&&o.plugFlag||(e.done=function(e,a,t){var i=this,l=i.id;_(l),"function"==typeof o&&o.call(i,e,a,t)},e.done.plugFlag=!0),t.colFilterRecord){var c=B.get(l,e.colFilterRecord);i.each(e.cols,function(e,a){i.each(a,function(e,a){a.hide=!!c[a.field]})})}else B.clear(l);e.cols.length>1&&layui.each(e.cols,function(e,a){layui.each(a,function(e,a){a.field||a.toolbar||a.colspan&&1!==a.colspan||k.indexOf(a.type)!==-1?!a[x]||a.colspan>1||(a[x]=!1):a[x]=!0})});var d=A.call(a,e),s=d.config,f=s.elem.next();f.attr("lay-id")!==s.id&&f.attr("lay-id",s.id);var h=D(s.id);return h&&(d.setColsWidth(),h.config.url&&h.loading()),u[s.id]=d};var j=r.reload,F=function(){var e=["url","method","where","contentType","headers","parseData","request","response","data","page","initSort","autoSort"];return{getParams:function(){return e},registParams:function(){var a=this;layui.each(arguments,function(t,i){L(i)?a.registParams.apply(a,i):"string"==typeof i&&e.indexOf(i)===-1&&e.push(i)})}}}(),R=function(){var e=!1;return{enable:function(){if(!arguments.length)return e;var a=arguments[0];"boolean"!=typeof a?d.error("如果要开启或者关闭全局的表格智能重载模式，请传入一个true/false为参数"):e=a}}}();F.registParams("colFilterRecord","checkStatus","smartReloadModel","checkDisabled"),r.reload=function(e,a,t){var l=this,n=E(e),o=i.extend(!0,{},E(e),a);if(o.checkStatus||P.reset(e),R.enable()&&o.smartReloadModel){var c=!1;if(!!o.page!=!!n.page&&(c=!0),!c){var s=i.extend(!0,[],F.getParams());layui.each(a,function(e,a){var t=s.indexOf(e);return t===-1?c=!0:void s.splice(t,1)})}if(!c){if(T){var f=D(e);return"object"==typeof a.page&&(a.page.curr&&(f.page=a.page.curr),delete a.elem,delete a.jump),t?i.extend(f.config,a):i.extend(!0,f.config,a),f.config.page||(f.page=1),f.elem.data("patch",!0),f.loading(),f.pullData(f.page),r.thisTable.call(f)}d.error("您开启了智能重载模式smartReloadModel，但是未检测到一个必要的前提，另参考帖子 https://fly.layui.com/jie/43423/ 里面的相关内容将table.js进行一个非常小的改造，之后再试试看。")}}if(!t||!T){var f=j.call(l,e,a);return u[e]=f}w.call(D(e),a),u[e].config=D(e).config};var E=function(e){return u[e]&&u[e].config},H=r.checkStatus;r.checkStatus=function(e){var a=this,t=H.call(a,e),i=E(e);if(i&&i.checkStatus&&(t.status=P.get(e)),i&&i.checkDisabled){var l=i.checkDisabled;if("object"==typeof l&&l.enabled!==!1){var n=0,o=0,c=l.primaryKey,d=P.get(e,p);layui.each(r.cache[e],function(e,a){var t=a[c];d.indexOf(t)===-1&&(n++,a[r.config.checkName]&&o++)}),t.isAll=o>0&&n===o}}return t};var N=function(e,a,t){return!P.checkDisabled(e,a)&&void P.update(e,a,t)};r.on("checkbox",function(e){var a=i(this).closest(".layui-table-view"),t=a.attr("lay-id"),l=E(t);if(P.check(t)){var n=e.checked,o=e.data,d=e.type,s=l.checkStatus?l.checkStatus.primaryKey||"id":"id";if("one"===d)N(t,o[s],n);else if("all"===d){var u=!1;layui.each(layui.table.cache[t],function(e,i){var l=N(t,i[s],n);if(l===!1){u=!0;var o=P.getChecked(t).indexOf(i[s])!==-1;a.find(".layui-table-body").find('tr[data-index="'+e+'"]').find('input[name="layTableCheckbox"]').prop("checked",o),i[r.config.checkName]=o}}),u&&c.render("checkbox",a.attr("lay-filter"))}}}),c.on("checkbox",function(e){i(e.elem).change()});var B=function(){var e="tablePlug_col_filter_record",a=function(e){return"local"===e?"data":"sessionData"};return{set:function(t,i,l,n){if(t&&i){var o=a(n),c=this.get(t,n);c[i]=!l,layui[o](e,{key:t,value:c})}},get:function(t,i){return layui[a(i)](e)[t]||{}},clear:function(a){i.each(["data","sessionData"],function(t,i){layui[i](e,{key:a,remove:!0})})}}}();i(document).on("change",'input[lay-filter="LAY_TABLE_TOOL_COLS"]',function(e){var a=i(this),t=a.attr("name"),l=a.closest(".layui-table-view"),n=l.attr("lay-id"),o=E(n),c=o.colFilterRecord;c?B.set(n,t,this.checked,c):B.clear(n)}),i(document).off("mousedown",".layui-table-grid-down").on("mousedown",".layui-table-grid-down",function(e){r._tableTrCurr=i(this).closest("td")}),i(document).off("click",".layui-table-tips-main [lay-event]").on("click",".layui-table-tips-main [lay-event]",function(e){var a=i(this),t=r._tableTrCurr;if(t){var l=a.closest(".layui-table-tips").attr("times");o.close(l),r._tableTrCurr.find('[lay-event="'+a.attr("lay-event")+'"]').first().click()}}),r.on("sort()",function(e){var a=this.closest(".layui-table-view").attr("lay-id");E(a).autoSort&&_(a)}),i.extend(s,{CHECK_TYPE_ADDITIONAL:f,CHECK_TYPE_REMOVED:h,CHECK_TYPE_ORIGINAL:y,tableCheck:P,colFilterRecord:B,getConfig:E,getIns:function(e){return u[e]},disabledCheck:function(e,a){var t=this;P.disabled(e,a||[]),_.call(t,e,!0)},dataRenderChecked:O,queryParams:F,smartReload:R,tableFilterInvert:function(e){e=i(e);var a=e.closest(".layui-table-view"),t=a.attr("lay-id");if(t){var l=r.checkStatus(t);l.isAll?a.find('[lay-filter="layTableAllChoose"]+').click():a.find('tbody [name="layTableCheckbox"]:checked').length?layui.each(a.find('tbody [name="layTableCheckbox"]'),function(e,a){i(a).next().click()}):a.find('[lay-filter="layTableAllChoose"]+').click()}}}),e("tablePlug",s)});